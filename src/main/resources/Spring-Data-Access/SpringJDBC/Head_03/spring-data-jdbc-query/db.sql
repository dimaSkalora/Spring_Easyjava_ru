CREATE TABLE CUSTOMERS (
  ID IDENTITY PRIMARY KEY,
  EMAIL VARCHAR(128) UNIQUE NOT NULL
);

CREATE TABLE SKUS (
  ID IDENTITY PRIMARY KEY,
  DESCRIPTION VARCHAR(256) NOT NULL
);

CREATE TABLE ORDERS (
  ID IDENTITY PRIMARY KEY,
  CUSTOMER_ID BIGINT NOT NULL,
  FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMERS(ID)
);

CREATE TABLE ORDER_ITEMS (
  ID IDENTITY PRIMARY KEY,
  ORDER_ID BIGINT NOT NULL,
  SKU_ID BIGINT NOT NULL,
  QUANTITY INTEGER NOT NULL,
  FOREIGN KEY (ORDER_ID) REFERENCES ORDERS(ID),
  FOREIGN KEY (SKU_ID) REFERENCES SKUS(ID)
);

ALTER TABLE ORDER_ITEMS ADD UNIQUE (ORDER_ID, SKU_ID);

--
INSERT INTO CUSTOMERS(ID, EMAIL) VALUES (1, 'test@example.org');
INSERT INTO CUSTOMERS(ID, EMAIL) VALUES (2, 'example@example.org');

INSERT INTO SKUS(ID, DESCRIPTION) VALUES (1, 'Sample SKU #1');
INSERT INTO SKUS(ID, DESCRIPTION) VALUES (2, 'Sample SKU #2');
INSERT INTO SKUS(ID, DESCRIPTION) VALUES (3, 'Sample SKU #3');

INSERT INTO ORDERS(ID, CUSTOMER_ID) VALUES (1, 1);
INSERT INTO ORDERS(ID, CUSTOMER_ID) VALUES (2, 2);
INSERT INTO ORDERS(ID, CUSTOMER_ID) VALUES (3, 2);
INSERT INTO ORDERS(ID, CUSTOMER_ID) VALUES (4, 1);
INSERT INTO ORDERS(ID, CUSTOMER_ID) VALUES (5, 2);
INSERT INTO ORDERS(ID, CUSTOMER_ID) VALUES (6, 1);

INSERT INTO ORDER_ITEMS(ORDER_ID, SKU_ID, QUANTITY) VALUES (1, 1, 1);
INSERT INTO ORDER_ITEMS(ORDER_ID, SKU_ID, QUANTITY) VALUES (2, 2, 2);
INSERT INTO ORDER_ITEMS(ORDER_ID, SKU_ID, QUANTITY) VALUES (2, 3, 4);
INSERT INTO ORDER_ITEMS(ORDER_ID, SKU_ID, QUANTITY) VALUES (3, 1, 2);
INSERT INTO ORDER_ITEMS(ORDER_ID, SKU_ID, QUANTITY) VALUES (4, 1, 1);
INSERT INTO ORDER_ITEMS(ORDER_ID, SKU_ID, QUANTITY) VALUES (4, 2, 1);
INSERT INTO ORDER_ITEMS(ORDER_ID, SKU_ID, QUANTITY) VALUES (4, 3, 1);
INSERT INTO ORDER_ITEMS(ORDER_ID, SKU_ID, QUANTITY) VALUES (5, 2, 3);
INSERT INTO ORDER_ITEMS(ORDER_ID, SKU_ID, QUANTITY) VALUES (6, 1, 5);
INSERT INTO ORDER_ITEMS(ORDER_ID, SKU_ID, QUANTITY) VALUES (6, 3, 3);